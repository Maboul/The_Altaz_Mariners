####################################################################################
# Character Abilities
####################################################################################

#define TAM_WEAPON_SPECIAL_CLUMSY
    [chance_to_hit]
        id=tam_clumsy
        name= _ "clumsy"
        description= _ "This attack has a -10% chance to hit."
        add=-10
        cumulative=yes
    [/chance_to_hit]
#enddef

#define TAM_WEAPON_SPECIAL_PARRY
	[damage]
		id=tam_parry
		name= _ "parry"
		name_inactive= _ "parry"
		description= _ "When this attack is used offensively, this unit takes 25% less damage in retaliation."
		description_inactive= _ "When this attack is used offensively, this unit takes 25% less damage in retaliation."
		active_on=offense
		apply_to=opponent
		multiply=0.75
	[/damage]
#enddef

#define TAM_WEAPON_SPECIAL_KNOCKBACK
	[dummy]
		id=tam_knockback
		name= _ "knockback"
		description=_ "When a unit is hit with a knockback attack, it is immediately pushed back one hex away from the attacker. Units cannot be knocked back into an occupied hex or onto terrain they normally could not move to. This attack cannot be used in defence."
	[/dummy]
#enddef

#define TAM_WEAPON_SPECIAL_DISARM
	[chance_to_hit]
        id=tam_disarm
        name= _ "disarm"
        description= _ "When a unit is hit with this attack it becomes disarmed and cannot use any ranged attacks until the end of its next turn. In addition, this attack has a +10% chance to hit."
        add=10
        cumulative=yes
    [/chance_to_hit]
#enddef

#define TAM_WEAPON_SPECIAL_DISARMED
	[disable]
		id=tam_disarmed
		name= _ "disarmed"
		description=_ "This attack has been disarmed and cannot be used until after the unit's next turn."
	[/disable]
#enddef

####################################################################################
# Reference Dummies
####################################################################################

#define WEAPON_SPECIAL_UPGRADE_SWING
	[dummy]
		id=tam_upgrade_swing
		name= _ "upgrade"
		description=_ "This attack's damage will gradually increase as a result of being used offensively in combat. The maximum damage for the swing attack is 12. This tooltip will be removed when the attack is maxed out."
	[/dummy]
#enddef

#define WEAPON_SPECIAL_UPGRADE_JAB
	[dummy]
		id=tam_upgrade_jab
		name= _ "upgrade"
		description=_ "This attack's damage will gradually increase as a result of being used offensively in combat. The maximum damage for the jab attack is 14. This tooltip will be removed when the attack is maxed out."
	[/dummy]
#enddef

#define WEAPON_SPECIAL_UPGRADE_BLOCK
	[dummy]
		id=tam_upgrade_block
		name= _ "upgrade"
		description=_ "This attack's damage will gradually increase as a result of being used offensively in combat. The maximum damage for the block attack is 11. This tooltip will be removed when the attack is maxed out."
	[/dummy]
#enddef

#define WEAPON_SPECIAL_UPGRADE_SMACKDOWN
	[dummy]
		id=tam_upgrade_smackdown
		name= _ "upgrade"
		description=_ "This attack's damage will gradually increase as a result of being used offensively in combat. The maximum damage for the smackdown attack is 6. This tooltip will be removed when the attack is maxed out."
	[/dummy]
#enddef

#define WEAPON_SPECIAL_UPGRADE_SLINGSHOT
	[dummy]
		id=tam_upgrade_slingshot
		name= _ "upgrade"
		description=_ "This attack's damage will gradually increase as a result of being used offensively in combat. The maximum damage for the slingshot attack is 7. This tooltip will be removed when the attack is maxed out."
	[/dummy]
#enddef

#define WEAPON_SPECIAL_UPGRADE_SLASH
	[dummy]
		id=tam_upgrade_slash
		name= _ "upgrade"
		description=_ "This attack's damage will gradually increase as a result of being used offensively in combat. The maximum damage for the slash attack is 10. This tooltip will be removed when the attack is maxed out."
	[/dummy]
#enddef

#define WEAPON_SPECIAL_UPGRADE_STAB
	[dummy]
		id=tam_upgrade_stab
		name= _ "upgrade"
		description=_ "This attack's damage will gradually increase as a result of being used offensively in combat. The maximum damage for the stab attack is 10. This tooltip will be removed when the attack is maxed out."
	[/dummy]
#enddef

#define WEAPON_SPECIAL_UPGRADE_QUICKFIRE
	[dummy]
		id=tam_upgrade_quickfire
		name= _ "upgrade"
		description=_ "This attack's damage will gradually increase as a result of being used offensively in combat. The maximum damage for the quickfire attack is 11. This tooltip will be removed when the attack is maxed out."
	[/dummy]
#enddef

#define WEAPON_SPECIAL_UPGRADE_SURESHOT
	[dummy]
		id=tam_upgrade_sureshot
		name= _ "upgrade"
		description=_ "This attack's damage will gradually increase as a result of being used offensively in combat. The maximum damage for the sureshot attack is 12. This tooltip will be removed when the attack is maxed out."
	[/dummy]
#enddef

#define WEAPON_SPECIAL_UPGRADE_FIREBOW
	[dummy]
		id=tam_upgrade_firebow
		name= _ "upgrade"
		description=_ "This attack's damage will gradually increase as a result of being used offensively in combat. The maximum damage for the firebow attack is 15. This tooltip will be removed when the attack is maxed out."
	[/dummy]
#enddef

####################################################################################
# Figurehead Dummies
####################################################################################

#define TAM_ABILITY_STURDY
	[dummy]
		id=tam_sturdy
		name= _ "sturdy"
		description=_ "This unit has been blessed by the figurehead of The Sturdy Sentinel and receives +10% blade and pierce resistance."
	[/dummy]
#enddef

#define TAM_ABILITY_STURDY_TEMP
	[dummy]
		id=tam_sturdy_temp
		name= _ "sturdy"
		description=_ "This unit has gained a temporary bonus from the figurehead of The Sturdy Sentinel and receives +10% blade and pierce resistance."
	[/dummy]
#enddef

#define TAM_ABILITY_SPEEDY
	[dummy]
		id=tam_speedy
		name= _ "speedy"
		description=_ "This unit has been blessed by the figurehead of Renaldo's Rider and its maximum moves have been increased by 2."
	[/dummy]
#enddef

#define TAM_ABILITY_SPEEDY_TEMP
	[dummy]
		id=tam_speedy_temp
		name= _ "speedy"
		description=_ "This unit has gained a temporary bonus from the figurehead of Renaldo's Rider and its maximum moves have been increased by 2."
	[/dummy]
#enddef

#define TAM_ABILITY_DEADLY
	[dummy]
		id=tam_deadly
		name= _ "deadly"
		description=_ "This unit has been blessed by the figurehead of the Champion of Bastille and its melee damage has been increased by 2."
	[/dummy]
#enddef

#define TAM_ABILITY_DEADLY_TEMP
	[dummy]
		id=tam_deadly_temp
		name= _ "deadly"
		description=_ "This unit has gained a temporary bonus from the figurehead of the Champion of Bastille and its melee damage has been increased by 2."
	[/dummy]
#enddef

####################################################################################
# Training Abilities
####################################################################################

#define TAM_ABILITY_AMBIDEXTROUS
    [dummy]
        id=tam_ambidextrous
        name= _ "ambidextrous"
        description= _ "Whenever this unit kills an enemy it can immediately attack again with a different weapon. This ability can be triggered multiple times in the same turn, but it must use a different weapon every time. It is of no use to units that only have a single attack (such as Woses)."
    [/dummy]
#enddef

#define TAM_ABILITY_TOUGH
    [resistance]
        id=tam_tough
        add=20
        max_value=50
        apply_to=blade,pierce,impact,fire,cold,arcane
        name= _ "tough"
        description= _ "This unit's resistances receive a bonus of +20%, up to a maximum of 50%, when defending."
        affect_self=yes
        active_on=defense
    [/resistance]
#enddef

#define TAM_ABILITY_EXTRA_HEAL
    [heals]
        value=8
        id=healing
        affect_allies=yes
        name= _ "heals +8"
        female_name= _ "female^heals +8"
        description= _ "This unit combines herbal remedies with magic to heal units more quickly than is normally possible on the battlefield.

A unit cared for by this healer may heal up to 8 HP per turn, or cure a unit of poison."
        affect_self=no
        poison=cured
        [affect_adjacent]
        [/affect_adjacent]
    [/heals]
#enddef

#define ABILITY_SIDESTEP
    [dummy]
        id=sidestep
        name= _ "sidestep"
        description= _ "This unit gets 1 movement point whenever it attacks, allowing it to move after fighting. This does not mean it can attack twice in the same turn."
    [/dummy]
#enddef

#define TAM_ABILITY_STEALTH
    # Canned definition of the Concealment ability to be included in an
    # [abilities] clause.
    [hides]
        id=tam_stealth
        name= _ "stealth"
        female_name= _ "female^stealth"
        description= _ "This unit gains 10% defence in villages. It can also hide in villages, and remain undetected by its enemies, except by those standing next to it.

Enemy units cannot see this unit while it is in a village, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        name_inactive= _ "stealth"
        female_name_inactive= _ "female^stealth"
        description_inactive= _ "This unit gains 10% defence in villages. It can also hide in villages, and remain undetected by its enemies, except by those standing next to it.

Enemy units cannot see this unit while it is in a village, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        affect_self=yes
        [filter]
            [filter_location]
                terrain=*^V*,*^Zwv,*^Zlh,*^Zbt,*^Vyav
            [/filter_location]
        [/filter]
    [/hides]
#enddef

#define TAM_ABILITY_SWIMMER
	[hides]
        id=tam_swimmer
        name= _ "swimmer"
        female_name= _ "female^swimmer"
        description= _ "This unit can move in shallow water, deep water and reefs for 2 movement points. Defence on all sea terrain is improved by +10%.

In addition, this unit can hide in reefs and remain undetected by its enemies, except by those standing next to it.

Enemy units cannot see this unit while it is in a reef, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
		name_inactive= _ "swimmer"
        female_name_inactive= _ "female^swimmer"
        description_inactive= _ "This unit can move in shallow water, deep water and reefs for 2 movement points. Defence on all sea terrain is improved by +10%

In addition, this unit can hide in reefs and remain undetected by its enemies, except by those standing next to it.

Enemy units cannot see this unit while it is in a reef, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        affect_self=yes
        [filter]
            [filter_location]
                terrain=Wwrg,Wwr,Wwrt
            [/filter_location]
        [/filter]
    [/hides]
#enddef

####################################################################################
# Special Abilities
####################################################################################

#define TAM_ABILITY_INVISIBLE
    [hides]
        id=tam_invisible
        name= _ "invisible"
        female_name= _ "female^invisible"
        description= _ "This unit will remain undetected unless adjacent to an enemy. The effect will wear off at the start of the unit's next turn."
        affect_self=yes
		[filter]
		[/filter]
    [/hides]
#enddef

#define ABILITY_IMMUNE
    [dummy]
        id=immune
        name= _ "immune"
        female_name= _ "female^immune"
        description= _ "This unit is protected by a powerful magic artifact; they are fully healed after every fight."
    [/dummy]
#enddef

# These have been replaced by the trait equivalent

#define TAM_ABILITY_SLAVE
#	[dummy]
#       id=slave
#        name= _ "slave"
#        female_name= _ "female^slave"
#        description= _ "This unit doesn't require upkeep."
#    [/dummy]
#enddef

#define TAM_ABILITY_FOLLOWER
#    [dummy]
#        id=follower
#        name= _ "follower"
#        female_name= _ "female^follower"
#        description= _ "This unit doesn't require upkeep and will be automatically recalled for no cost at the start of scenarios."
#    [/dummy]
#enddef

#define TAM_WEAPON_SPECIAL_PETRIFY
    [petrifies]
        id=tam_petrifies
        name= _ "petrifies"
        description= _ "This attack petrifies the target, turning it to stone. Units that have been petrified may not move or attack. The effects will eventually wear off; petrified units will be unpetrified at dawn."
    [/petrifies]
#enddef

#define TAM_ABILITY_SNEAK
    [hides]
        id=tam_sneak
        name= _ "sneak"
        female_name= _ "female^sneak"
        description= _ "This unit will remain undetected unless adjacent to an enemy or a source of light."
        name_inactive= _ "sneak"
        female_name_inactive= _ "female^sneak"
        description_inactive= _ "This unit will remain undetected unless adjacent to an enemy or a source of light."
        affect_self=yes
        #alert="Spotted!"
        [filter]
            [filter_location]
                time_of_day=chaotic
            [/filter_location]
        [/filter]
    [/hides]
#enddef

#define TAM_ABILITY_DISGUISE
	[dummy]
        id=tam_disguise
        name= _ "disguise"
        female_name= _ "female^disguise"
        description= _ "This unit has disguised itself as a nightgaunt. Boo!"
    [/dummy]
#enddef

#define TAM_WEAPON_SPECIAL_LONGSHOT
	[dummy]
        id=tam_longshot
        name= _ "longshot"
        female_name= _ "female^longshot"
        description= _ "At the start of its turn this unit will shoot every target on its diagonal line of fire, within a range of 7 hexes. This is in addition to any attacks it may make in normal combat. Longshot attacks automatically hit, but they cannot, by themselves, kill a unit."
    [/dummy]
#enddef

#define TAM_ABILITY_PATROL
    [dummy]
        id=tam_patrol
        name= _ "patrol"
        female_name= _ "female^patrol"
        description= _ "This unit will move to and fro between waypoints unless an enemy is spotted. If this unit starts his turn aware of an enemy he will sound the alarm, alerting the other guards."
    [/dummy]
#enddef

#define TAM_ABILITY_SNIFFER
    [dummy]
        id=tam_sniffer
        name= _ "sniffer"
        female_name= _ "female^sniffer"
        description= _ "This unit can smell the enemy even when they are hiding. It will continue to move towards its target until it has tracked them down."
    [/dummy]
#enddef

#define TAM_ABILITY_RESTORE
    [regenerate]
        value=2
        id=regenerates
        name= _ "restore"
        description= _ "The unit will heal itself 2 HP per turn, or stop poison from taking effect for that turn.

A unit with restore cannot be cured of poison unless it visits a village or seeks the care of a unit that can cure."
        affect_self=yes
        poison=slowed
    [/regenerate]
#enddef

#define TAM_ABILITY_FOREST_SPIRIT
    [hides]
        id=forest-ambush
        name= _ "ambush"
        female_name= _ "female^ambush"
        description= _ "This unit can hide in the magic forest and remain undetected by its enemies.

Enemy units cannot see this unit while it is in the magic forest, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        name_inactive= _ "ambush"
        female_name_inactive= _ "female^ambush"
        description_inactive= _ "This unit can hide in the magic forest and remain undetected by its enemies.

Enemy units cannot see this unit while it is in the magic forest, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        affect_self=yes
		alert="Ambushed!"
        [filter]
            [filter_location]
                terrain=Zfc^Zpt
            [/filter_location]
        [/filter]
    [/hides]
#enddef

#define TAM_ABILITY_BURROW
    [hides]
        id=burrow
        name= _ "burrow"
        female_name= _ "female^burrow"
        description= _ "This unit can hide in sand and desert and remain undetected by its enemies.

Enemy units cannot see this unit while it is in sand or desert, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        name_inactive= _ "burrow"
        female_name_inactive= _ "female^burrow"
        description_inactive= _ "This unit can hide in sand and desert and remain undetected by its enemies.

Enemy units cannot see this unit while it is in sand or desert , except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        affect_self=yes
		alert="Ambushed!"
        [filter]
            [filter_location]
                terrain=Ds,Dd,Dd^Dc
            [/filter_location]
        [/filter]
    [/hides]
#enddef

#define TAM_ABILITY_DARKENS
[illuminates]
	id=tam_darkens
	value=-25
	min_value=-25
	max_value=25
	cumulative=no
	affect_self=yes
	name= _ "darkens"
	female_name= _ "female^darkens"
	description= _ "This unit darkens the surrounding area, making chaotic units fight better, and lawful units fight worse. Any units adjacent to this unit will fight as if it were night when it is dusk, and as if it were dusk when it is day."
	affect_self=yes
[/illuminates]
#enddef

####################################################################################
# Generic Abilities
####################################################################################

#define WEAPON_SPECIAL_DEFEND_ONLY
	[dummy]
		id=defend_only
		name= _ "defend only"
		description= _ "This weapon is only available for defense."
	[/dummy]
#enddef

#define SPECIAL_NOTES_DEFEND_ONLY
    _"One of this unit's attacks can only be used to defend."#enddef

#define WEAPON_SPECIAL_ATTACK_ONLY
	[dummy]
		id=attack_only
		name= _ "attackd only"
		description= _ "This weapon is not available for defense."
	[/dummy]
#enddef

#define SPECIAL_NOTES_ATTACK_ONLY
    _"One of this unit's attacks cannot be used to defend."#enddef
   
#define ABILITY_DISTRACT
    [skirmisher]
        id=distract
        name= _ "distract"
        description= _ "This unit negates enemy Zones of Control around itself for allied units (but not for itself)."
        affect_self=no
        affect_allies=yes
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
        [/affect_adjacent]
    [/skirmisher]
#enddef

#define SPECIAL_NOTES_DISTRACT
_"This unit is capable of distracting opponents, allowing allied units to trespass their Zones of Control and move unhindered around them."#enddef

####################################################################################
# Ship Abilities
####################################################################################

#define ABILITY_SEA_AMBUSH
    [hides]
        id=sea-ambush
        name= _ "ambush"
        female_name= _ "female^ambush"
        description= _ "This unit can hide in water and remain undetected by its enemies.

Enemy units cannot see this unit while it is in water, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        name_inactive= _ "ambush"
        female_name_inactive= _ "female^ambush"
        description_inactive= _ "This unit can hide in deep water and remain undetected by its enemies.

Enemy units cannot see this unit while it is in water, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        affect_self=yes
		alert=" "
        [filter]
            [filter_location]
                terrain=Wot,Ww
            [/filter_location]
        [/filter]
    [/hides]
#enddef    

#define ABILITY_TROOPS_ONBOARD
	[dummy]
		id=troops_onboard
		name= _ "troops onboard"
		description=_ "This ship is carrying troops. It must reach land in the north to put them to shore, it can then come south again to pick up more."
	[/dummy]
#enddef

#define TAM_ABILITY_EXTRA_CARGO
	[dummy]
		id=extra_cargo
		name= _ "cargo"
		description=_ "This ship has an expanded cargo hold. It can carry an extra commodity of each type."
	[/dummy]
#enddef

#define TAM_WEAPON_SPECIAL_INACCURATE
    [chance_to_hit]
        id=tam_inaccurate
        name= _ "inaccurate"
        description= _ "This attack has a -10% chance to hit."
        add=-10
        cumulative=yes
    [/chance_to_hit]
#enddef

#define TAM_WEAPON_SPECIAL_SALVO
[damage]
	id=tam_salvo
		name= _ "salvo"
		description=_ "A simultanous discharge of all the ship's cannons: this attack deals double damage to the target. It also causes this unit to take double damage from the target's counterattack. It cannot be used in defence."
	multiply=2
	apply_to=both
	active_on=offense
[/damage]
#enddef

#define TAM_WEAPON_SPECIAL_INCENDIARY
	[dummy]
		id=tam_incendiary
		name= _ "incendiary"
		description=_ "When used offensively, every time this attack hits an enemy ship there is a 50% chance the target will be set on fire. The ship will then lose 10 HP on its next turn, 8 HP on its subsequent turn, and so on, until the fire burns itself out. Attacking a burning ship also entails a 50% chance of the attacker being set on fire. A burning ship can be doused by entering a village which will put out the fire (in addition, ships cannot be set on fire whilst in a village). Fires can destroy ships if they are reduced to zero hitpoints."
	[/dummy]
#enddef

####################################################################################
# Curses
####################################################################################

#define TAM_CURSE_NAGA
    [dummy]
        id=tam_curse_naga
        name= _ "cursed"
        female_name= _ "female^cursed"
        description= _ "Curse of the Naga: This unit now has the same defence and movement costs as a naga, making it better on sea, swamp and sand - but worse on most land-based terrains. These effects will remain in play until the curse is removed."
    [/dummy]
#enddef

#define TAM_CURSE_MORTEAU
    [dummy]
        id=tam_curse_morteau
        name= _ "cursed"
        female_name= _ "female^cursed"
        description= _ "Curse of Morteau: This unit is now immune to drain, poison, and plague - but it also has -10 Max HP and -40% arcane resistance. These effects will remain in play until the curse is removed."
    [/dummy]
#enddef

#define TAM_CURSE_FURNACE
    [dummy]
        id=tam_curse_furnace
        name= _ "cursed"
        female_name= _ "female^cursed"
        description= _ "Curse of the Furnace: This unit has +10% fire resistance and -20% cold resistance. These effects will remain in play until the curse is removed."
    [/dummy]
#enddef

#define TAM_CURSE_GRAVEDIGGER
    [dummy]
        id=tam_curse_gravedigger
        name= _ "gravedigger"
        female_name= _ "female^gravedigger"
        description= _ "Curse of the Gravedigger: This unit has -20% arcane resistance."
    [/dummy]
#enddef

#define TAM_CURSE_DRUNKARD
    [dummy]
        id=tam_curse_drunkard
        name= _ "drunkard"
        female_name= _ "female^drunkard"
        description= _ "Curse of the Drunkard: This unit suffers -1 movement and a +20% Max XP penalty."
    [/dummy]
#enddef

#define TAM_CURSE_GLUTTON
    [dummy]
        id=tam_curse_glutton
        name= _ "glutton"
        female_name= _ "female^glutton"
        description= _ "Curse of the Glutton: This unit is slowed whenever it begins its turn in a village."
    [/dummy]
#enddef

#define TAM_CURSE_GREEDY
    [dummy]
        id=tam_curse_greedy
        name= _ "greedy"
        female_name= _ "female^glutton"
        description= _ "Curse of the Greedy: This unit cannot give gold to the other player."
    [/dummy]
#enddef

#define TAM_CURSE_ANCIENT_MARINER
    [dummy]
        id=tam_curse_ancient_mariner
        name= _ "cursed"
        female_name= _ "female^cursed"
        description= _ "Curse of the Ancient Mariner: This unit deals double damage to any flying unit, whether it is attacking or defending. It also receives double damage from flying units."
    [/dummy]
#enddef

#define TAM_WEAPON_SPECIAL_CURSE_ANCIENT_MARINER
	[damage]
		id=tam_curse_ancient_mariner_weapon_special
		name= _ "cursed"
		female_name= _ "female^cursed"
		description= _ "Curse of the Ancient Mariner: This attack deals double damage to any flying unit, both in defence and when used offensively."
		multiply=2
		apply_to=both
		cumulative=yes
		[filter_opponent]
			[filter_wml]
				[movement_costs]
					unwalkable=1
				[/movement_costs]
			[/filter_wml]
			[or]
				type="Elvish Shyde"
			[/or]
			[or]
				type="Elvish Sylph"
			[/or]
			[or]
				type="Ghost,Wraith,Spectre,Shadow,Nightgaunt"
			[/or]
		[/filter_opponent]
	[/damage]
#enddef
